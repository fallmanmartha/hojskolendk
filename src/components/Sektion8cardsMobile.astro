---
import Heading from "./Heading.astro";
import Text from "./Text.astro";

const cards = [
  {
    image: "/bike.png",
    title: "Drømmen om højskole i udlandet",
    paragraphs: [
      "Drømmer du om at rejse på højskole i udlandet for unge? Når du rejser med HÖJSKOLENDK, får du dit livs eventyr, og vi garanterer dig masser af fællesskab, fantastiske oplevelser og meningsfuld læring.",
      "Et højskoleophold i udlandet er noget, du bare skal prøve mindst én gang i dit liv – du vil aldrig fortryde, at du tog afsted. Og du kan glæde dig til nye venskaber og oplevelser for livet.",
    ],
  },
  {
    image: "/machu.png",
    title: "Rejs ud i verden med HÖJSKOLENDK",
    paragraphs: [
      "Med HÖJSKOLENDK kan du komme på rejsende højskole i stort set alle hjørner af verdenen. Drømmer du om smukke og vilde naturoplevelser på Bali, Hawaii, Maldiverne eller i Australien?",
      "Storbyseventyr i Sydney, Tokyo, Bangkok eller Rio de Janeiro? Kulturelle oplevelser og autentiske menneskemøder i Indien, Bolivia, Sri Lanka, Japan eller Mexico? Fede adventure aktiviteter med masser af adrenalin i New Zealand, Nepal, Ecuador eller Costa Rica? Vælg mellem et af vores fantastiske højskoleophold i udlandet, og lad verden gøre dig endnu mere nysgerrig.",
    ],
  },
  {
    image: "/group.png",
    title: "Fællesskab og tryghed på rejsen",
    paragraphs: [
      "Du rejser altid med andre unge mennesker på din egen alder samt danske rejseledere og undervisere.",
      "På højskolerejsen kommer du ikke kun til at opleve og forstå andre spændende kulturer – rejserne giver også et unikt indblik i dig selv. Du kommer hjem med mere selvtillid og selvværd og står endnu stærkere som menneske.",
    ],
  },
  {
    image: "/boat.png",
    title: "En rejse i personlig udvikling",
    paragraphs: [
      "At rejse med en højskole er ikke blot et eventyr ud i verden – det er også en spændende rejse i forhold til dig og din personlige udvikling.",
      "Du lærer dig selv bedre at kende, opdager nye sider af dig selv og vokser gennem de oplevelser, du får undervejs.",
    ],
  },
  {
    image: "/green.png",
    title: "Højskoleophold året rundt",
    paragraphs: [
      "HÖJSKOLENDK tilbyder alverdens skønne rejser og ophold, og du kan både komme på højskoleophold i udlandet i løbet af året eller på højskole i udlandet i sommerferien. Begge muligheder er enormt populære blandt vores skønne højskoleelever.",
      "Højskoleophold i sommerferien er typisk kortere og varer ca. 5 uger. Her oplever du flere lande, kulturer og traditioner, langt fra det danske vi kender. Det er et oplagt eventyr til dig, der gerne vil rejse, møde andre unge mennesker og udvikle dig i løbet af sommerferien – inden du fx starter på nyt studie eller job.",
    ],
  },
  {
    image: "/bus.png",
    title: "Dit livs eventyr venter",
    paragraphs: [
      "Vores højskoleophold i løbet af året varer mellem 2-3 måneder og er oplagt for dig, der holder sabbatår og gerne vil ud og opleve verden, mens du udvikler dig selv på et personligt plan.",
      "Tag på højskole i udlandet med andre og få en uforglemmelig oplevelse – vi tør godt love dig, at det bliver dit livs eventyr!",
    ],
  },
];

const totalCards = cards.length;
---

<section class="mb-3 lg:hidden" x-data={`{ current: 0, total: ${totalCards}, startX: null }`}>
  <div class="relative pt-14">
    <div class="absolute left-0 top-0 z-20 flex gap-3">
      <button type="button" class="flex h-10 w-10 items-center justify-center rounded-full bg-transparent transition hover:scale-105" @click="current = (current - 1 + total) % total" aria-label="Forrige kort">
        <img src="/blackarrow.svg" alt="" class="h-10 w-10 rotate-180" />
      </button>
      <button type="button" class="flex h-10 w-10 items-center justify-center rounded-full bg-transparent transition hover:scale-105" @click="current = (current + 1) % total" aria-label="Næste kort">
        <img src="/blackarrow.svg" alt="" class="h-10 w-10" />
      </button>
    </div>

    <div class="overflow-hidden rounded-3xl shadow-xl backdrop-blur">
      <div
        class="flex transition-transform duration-500 ease-out"
        :style="`transform: translateX(-${current * 100}%);`"
        @touchstart="startX = $event.touches[0].clientX"
        @touchend="
          if (startX === null) return;
          const diff = $event.changedTouches[0].clientX - startX;
          if (Math.abs(diff) > 40) {
            current = diff < 0 ? (current + 1) % total : (current - 1 + total) % total;
          }
          startX = null;
        "
      >
        {
          cards.map((card, index) => {
            const isFirst = index === 0;
            return (
              <article class="w-full shrink-0 px-0 pb-6 pt-2 rounded-3xl">
                <div class="flex flex-col gap-6">
                  <div class="overflow-hidden rounded-t-3xl shadow-lg">
                    <img src={card.image} alt={card.title} class="h-85 w-full object-cover" loading={isFirst ? "eager" : "lazy"} />
                  </div>
                  <div class="px-4">
                    <div class="mb-3">
                      <Heading htmlheading="h4" size="small" font="display">
                        {card.title}
                      </Heading>
                    </div>
                    {card.paragraphs.map((paragraph) => (
                      <Text>{paragraph}</Text>
                    ))}
                  </div>
                </div>
              </article>
            );
          })
        }
      </div>
    </div>
  </div>
</section>
